howmany = int(input())
elems = list(map(int, input().split()))

"""
https://programmers.co.kr/learn/courses/4008/lessons/12836
"""

def permute(arr):
    result = [arr[:]]
    c = [0] * len(arr)
    i = 0
    while i < len(arr):
        if c[i] < i:
            if i % 2 == 0:
                arr[0], arr[i] = arr[i], arr[0]
            else:
                arr[c[i]], arr[i] = arr[i], arr[c[i]]
            result.append(arr[:])
            c[i] += 1
            i = 0
        else:
            c[i] = 0
            i += 1
    return result

wtf = permute(elems)
print(wtf)

"""
[20, 1, 15, 8, 4, 10], [1, 20, 15, 8, 4, 10], [15, 20, 1, 8, 4, 10], [20, 15, 1, 8, 4, 10], [1, 15, 20, 8, 4, 10], [15, 1, 20, 8, 4, 10], [8, 1, 20, 15, 4, 10], [1, 8, 20, 15, 4, 10], [20, 8, 1, 15, 4, 10], [8, 20, 1, 15, 4, 10], [1, 20, 8, 15, 4, 10], [20, 1, 8, 15, 4, 10], [20, 15, 8, 1, 4, 10], [15, 20, 8, 1, 4, 10], [8, 20, 15, 1, 4, 10], [20, 8, 15, 1, 4, 10], [15, 8, 20, 1, 4, 10], [8, 15, 20, 1, 4, 10], [8, 15, 1, 20, 4, 10], [15, 8, 1, 20, 4, 10], [1, 8, 15, 20, 4, 10], [8, 1, 15, 20, 4, 10], [15, 1, 8, 20, 4, 10], [1, 15, 8, 20, 4, 10], [4, 15, 8, 20, 1, 10], [15, 4, 8, 20, 1, 10], [8, 4, 15, 20, 1, 10], [4, 8, 15, 20, 1, 10], [15, 8, 4, 20, 1, 10], [8, 15, 4, 20, 1, 10], [20, 15, 4, 8, 1, 10], [15, 20, 4, 8, 1, 10], [4, 20, 15, 8, 1, 10], [20, 4, 15, 8, 1, 10], [15, 4, 20, 8, 1, 10], [4, 15, 20, 8, 1, 10], [4, 8, 20, 15, 1, 10], [8, 4, 20, 15, 1, 10], [20, 4, 8, 15, 1, 10], [4, 20, 8, 15, 1, 10], [8, 20, 4, 15, 1, 10], [20, 8, 4, 15, 1, 10], [20, 8, 15, 4, 1, 10], [8, 20, 15, 4, 1, 10], [15, 20, 8, 4, 1, 10], [20, 15, 8, 4, 1, 10], [8, 15, 20, 4, 1, 10], [15, 8, 20, 4, 1, 10], [1, 8, 20, 4, 15, 10], [8, 1, 20, 4, 15, 10], [20, 1, 8, 4, 15, 10], [1, 20, 8, 4, 15, 10], [8, 20, 1, 4, 15, 10], [20, 8, 1, 4, 15, 10], [4, 8, 1, 20, 15, 10], [8, 4, 1, 20, 15, 10], [1, 4, 8, 20, 15, 10], [4, 1, 8, 20, 15, 10], [8, 1, 4, 20, 15, 10], [1, 8, 4, 20, 15, 10], [1, 20, 4, 8, 15, 10], [20, 1, 4, 8, 15, 10], [4, 1, 20, 8, 15, 10], [1, 4, 20, 8, 15, 10], [20, 4, 1, 8, 15, 10], [4, 20, 1, 8, 15, 10], [4, 20, 8, 1, 15, 10], [20, 4, 8, 1, 15, 10], [8, 4, 20, 1, 15, 10], [4, 8, 20, 1, 15, 10], [20, 8, 4, 1, 15, 10], [8, 20, 4, 1, 15, 10], [15, 20, 4, 1, 8, 10], [20, 15, 4, 1, 8, 10], [4, 15, 20, 1, 8, 10], [15, 4, 20, 1, 8, 10], [20, 4, 15, 1, 8, 10], [4, 20, 15, 1, 8, 10], [1, 20, 15, 4, 8, 10], [20, 1, 15, 4, 8, 10], [15, 1, 20, 4, 8, 10], [1, 15, 20, 4, 8, 10], [20, 15, 1, 4, 8, 10], [15, 20, 1, 4, 8, 10], [15, 4, 1, 20, 8, 10], [4, 15, 1, 20, 8, 10], [1, 15, 4, 20, 8, 10], [15, 1, 4, 20, 8, 10], [4, 1, 15, 20, 8, 10], [1, 4, 15, 20, 8, 10], [1, 4, 20, 15, 8, 10], [4, 1, 20, 15, 8, 10], [20, 1, 4, 15, 8, 10], [1, 20, 4, 15, 8, 10], [4, 20, 1, 15, 8, 10], [20, 4, 1, 15, 8, 10], [8, 4, 1, 15, 20, 10], [4, 8, 1, 15, 20, 10], [1, 8, 4, 15, 20, 10], [8, 1, 4, 15, 20, 10], [4, 1, 8, 15, 20, 10], [1, 4, 8, 15, 20, 10], [15, 4, 8, 1, 20, 10], [4, 15, 8, 1, 20, 10], [8, 15, 4, 1, 20, 10], [15, 8, 4, 1, 20, 10], [4, 8, 15, 1, 20, 10], [8, 4, 15, 1, 20, 10], [8, 1, 15, 4, 20, 10], [1, 8, 15, 4, 20, 10], [15, 8, 1, 4, 20, 10], [8, 15, 1, 4, 20, 10], [1, 15, 8, 4, 20, 10], [15, 1, 8, 4, 20, 10], [15, 1, 4, 8, 20, 10], [1, 15, 4, 8, 20, 10], [4, 15, 1, 8, 20, 10], [15, 4, 1, 8, 20, 10], [1, 4, 15, 8, 20, 10], [4, 1, 15, 8, 20, 10], [10, 1, 15, 8, 20, 4], [1, 10, 15, 8, 20, 4], [15, 10, 1, 8, 20, 4], [10, 15, 1, 8, 20, 4], [1, 15, 10, 8, 20, 4], [15, 1, 10, 8, 20, 4], [8, 1, 10, 15, 20, 4], [1, 8, 10, 15, 20, 4], [10, 8, 1, 15, 20, 4], [8, 10, 1, 15, 20, 4], [1, 10, 8, 15, 20, 4], [10, 1, 8, 15, 20, 4], [10, 15, 8, 1, 20, 4], [15, 10, 8, 1, 20, 4], [8, 10, 15, 1, 20, 4], [10, 8, 15, 1, 20, 4], [15, 8, 10, 1, 20, 4], [8, 15, 10, 1, 20, 4], [8, 15, 1, 10, 20, 4], [15, 8, 1, 10, 20, 4], [1, 8, 15, 10, 20, 4], [8, 1, 15, 10, 20, 4], [15, 1, 8, 10, 20, 4], [1, 15, 8, 10, 20, 4], [20, 15, 8, 10, 1, 4], [15, 20, 8, 10, 1, 4], [8, 20, 15, 10, 1, 4], [20, 8, 15, 10, 1, 4], [15, 8, 20, 10, 1, 4], [8, 15, 20, 10, 1, 4], [10, 15, 20, 8, 1, 4], [15, 10, 20, 8, 1, 4], [20, 10, 15, 8, 1, 4], [10, 20, 15, 8, 1, 4], [15, 20, 10, 8, 1, 4], [20, 15, 10, 8, 1, 4], [20, 8, 10, 15, 1, 4], [8, 20, 10, 15, 1, 4], [10, 20, 8, 15, 1, 4], [20, 10, 8, 15, 1, 4], [8, 10, 20, 15, 1, 4], [10, 8, 20, 15, 1, 4], [10, 8, 15, 20, 1, 4], [8, 10, 15, 20, 1, 4], [15, 10, 8, 20, 1, 4], [10, 15, 8, 20, 1, 4], [8, 15, 10, 20, 1, 4], [15, 8, 10, 20, 1, 4], [1, 8, 10, 20, 15, 4], [8, 1, 10, 20, 15, 4], [10, 1, 8, 20, 15, 4], [1, 10, 8, 20, 15, 4], [8, 10, 1, 20, 15, 4], [10, 8, 1, 20, 15, 4], [20, 8, 1, 10, 15, 4], [8, 20, 1, 10, 15, 4], [1, 20, 8, 10, 15, 4], [20, 1, 8, 10, 15, 4], [8, 1, 20, 10, 15, 4], [1, 8, 20, 10, 15, 4], [1, 10, 20, 8, 15, 4], [10, 1, 20, 8, 15, 4], [20, 1, 10, 8, 15, 4], [1, 20, 10, 8, 15, 4], [10, 20, 1, 8, 15, 4], [20, 10, 1, 8, 15, 4], [20, 10, 8, 1, 15, 4], [10, 20, 8, 1, 15, 4], [8, 20, 10, 1, 15, 4], [20, 8, 10, 1, 15, 4], [10, 8, 20, 1, 15, 4], [8, 10, 20, 1, 15, 4], [15, 10, 20, 1, 8, 4], [10, 15, 20, 1, 8, 4], [20, 15, 10, 1, 8, 4], [15, 20, 10, 1, 8, 4], [10, 20, 15, 1, 8, 4], [20, 10, 15, 1, 8, 4], [1, 10, 15, 20, 8, 4], [10, 1, 15, 20, 8, 4], [15, 1, 10, 20, 8, 4], [1, 15, 10, 20, 8, 4], [10, 15, 1, 20, 8, 4], [15, 10, 1, 20, 8, 4], [15, 20, 1, 10, 8, 4], [20, 15, 1, 10, 8, 4], [1, 15, 20, 10, 8, 4], [15, 1, 20, 10, 8, 4], [20, 1, 15, 10, 8, 4], [1, 20, 15, 10, 8, 4], [1, 20, 10, 15, 8, 4], [20, 1, 10, 15, 8, 4], [10, 1, 20, 15, 8, 4], [1, 10, 20, 15, 8, 4], [20, 10, 1, 15, 8, 4], [10, 20, 1, 15, 8, 4], [8, 20, 1, 15, 10, 4], [20, 8, 1, 15, 10, 4], [1, 8, 20, 15, 10, 4], [8, 1, 20, 15, 10, 4], [20, 1, 8, 15, 10, 4], [1, 20, 8, 15, 10, 4], [15, 20, 8, 1, 10, 4], [20, 15, 8, 1, 10, 4], [8, 15, 20, 1, 10, 4], [15, 8, 20, 1, 10, 4], [20, 8, 15, 1, 10, 4], [8, 20, 15, 1, 10, 4], [8, 1, 15, 20, 10, 4], [1, 8, 15, 20, 10, 4], [15, 8, 1, 20, 10, 4], [8, 15, 1, 20, 10, 4], [1, 15, 8, 20, 10, 4], [15, 1, 8, 20, 10, 4], [15, 1, 20, 8, 10, 4], [1, 15, 20, 8, 10, 4], [20, 15, 1, 8, 10, 4], [15, 20, 1, 8, 10, 4], [1, 20, 15, 8, 10, 4], [20, 1, 15, 8, 10, 4], [20, 4, 15, 8, 10, 1], [4, 20, 15, 8, 10, 1], [15, 20, 4, 8, 10, 1], [20, 15, 4, 8, 10, 1], [4, 15, 20, 8, 10, 1], [15, 4, 20, 8, 10, 1], [8, 4, 20, 15, 10, 1], [4, 8, 20, 15, 10, 1], [20, 8, 4, 15, 10, 1], [8, 20, 4, 15, 10, 1], [4, 20, 8, 15, 10, 1], [20, 4, 8, 15, 10, 1], [20, 15, 8, 4, 10, 1], [15, 20, 8, 4, 10, 1], [8, 20, 15, 4, 10, 1], [20, 8, 15, 4, 10, 1], [15, 8, 20, 4, 10, 1], [8, 15, 20, 4, 10, 1], [8, 15, 4, 20, 10, 1], [15, 8, 4, 20, 10, 1], [4, 8, 15, 20, 10, 1], [8, 4, 15, 20, 10, 1], [15, 4, 8, 20, 10, 1], [4, 15, 8, 20, 10, 1], [10, 15, 8, 20, 4, 1], [15, 10, 8, 20, 4, 1], [8, 10, 15, 20, 4, 1], [10, 8, 15, 20, 4, 1], [15, 8, 10, 20, 4, 1], [8, 15, 10, 20, 4, 1], [20, 15, 10, 8, 4, 1], [15, 20, 10, 8, 4, 1], [10, 20, 15, 8, 4, 1], [20, 10, 15, 8, 4, 1], [15, 10, 20, 8, 4, 1], [10, 15, 20, 8, 4, 1], [10, 8, 20, 15, 4, 1], [8, 10, 20, 15, 4, 1], [20, 10, 8, 15, 4, 1], [10, 20, 8, 15, 4, 1], [8, 20, 10, 15, 4, 1], [20, 8, 10, 15, 4, 1], [20, 8, 15, 10, 4, 1], [8, 20, 15, 10, 4, 1], [15, 20, 8, 10, 4, 1], [20, 15, 8, 10, 4, 1], [8, 15, 20, 10, 4, 1], [15, 8, 20, 10, 4, 1], [4, 8, 20, 10, 15, 1], [8, 4, 20, 10, 15, 1], [20, 4, 8, 10, 15, 1], [4, 20, 8, 10, 15, 1], [8, 20, 4, 10, 15, 1], [20, 8, 4, 10, 15, 1], [10, 8, 4, 20, 15, 1], [8, 10, 4, 20, 15, 1], [4, 10, 8, 20, 15, 1], [10, 4, 8, 20, 15, 1], [8, 4, 10, 20, 15, 1], [4, 8, 10, 20, 15, 1], [4, 20, 10, 8, 15, 1], [20, 4, 10, 8, 15, 1], [10, 4, 20, 8, 15, 1], [4, 10, 20, 8, 15, 1], [20, 10, 4, 8, 15, 1], [10, 20, 4, 8, 15, 1], [10, 20, 8, 4, 15, 1], [20, 10, 8, 4, 15, 1], [8, 10, 20, 4, 15, 1], [10, 8, 20, 4, 15, 1], [20, 8, 10, 4, 15, 1], [8, 20, 10, 4, 15, 1], [15, 20, 10, 4, 8, 1], [20, 15, 10, 4, 8, 1], [10, 15, 20, 4, 8, 1], [15, 10, 20, 4, 8, 1], [20, 10, 15, 4, 8, 1], [10, 20, 15, 4, 8, 1], [4, 20, 15, 10, 8, 1], [20, 4, 15, 10, 8, 1], [15, 4, 20, 10, 8, 1], [4, 15, 20, 10, 8, 1], [20, 15, 4, 10, 8, 1], [15, 20, 4, 10, 8, 1], [15, 10, 4, 20, 8, 1], [10, 15, 4, 20, 8, 1], [4, 15, 10, 20, 8, 1], [15, 4, 10, 20, 8, 1], [10, 4, 15, 20, 8, 1], [4, 10, 15, 20, 8, 1], [4, 10, 20, 15, 8, 1], [10, 4, 20, 15, 8, 1], [20, 4, 10, 15, 8, 1], [4, 20, 10, 15, 8, 1], [10, 20, 4, 15, 8, 1], [20, 10, 4, 15, 8, 1], [8, 10, 4, 15, 20, 1], [10, 8, 4, 15, 20, 1], [4, 8, 10, 15, 20, 1], [8, 4, 10, 15, 20, 1], [10, 4, 8, 15, 20, 1], [4, 10, 8, 15, 20, 1], [15, 10, 8, 4, 20, 1], [10, 15, 8, 4, 20, 1], [8, 15, 10, 4, 20, 1], [15, 8, 10, 4, 20, 1], [10, 8, 15, 4, 20, 1], [8, 10, 15, 4, 20, 1], [8, 4, 15, 10, 20, 1], [4, 8, 15, 10, 20, 1], [15, 8, 4, 10, 20, 1], [8, 15, 4, 10, 20, 1], [4, 15, 8, 10, 20, 1], [15, 4, 8, 10, 20, 1], [15, 4, 10, 8, 20, 1], [4, 15, 10, 8, 20, 1], [10, 15, 4, 8, 20, 1], [15, 10, 4, 8, 20, 1], [4, 10, 15, 8, 20, 1], [10, 4, 15, 8, 20, 1]"""
